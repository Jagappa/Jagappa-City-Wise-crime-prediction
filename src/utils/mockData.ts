
export interface CityData {
  city: string;
  personalrevenge: number;
  anger: number;
  fraud: number;
  extortion: number;
  causingdisrepute: number;
  prank: number;
  sexualexploitation: number;
  disruptpublicservice: number;
  salepurchaseillegaldrugs: number;
  developingownbusiness: number;
  spreadingpiracy: number;
  psychoorpervert: number;
  stealinformation: number;
  abetmenttosuicide: number;
  others: number;
  total: number;
}

// Sample data from the CSV
export interface CityData {
  city: string;
  personalrevenge: number;
  anger: number;
  fraud: number;
  extortion: number;
  causingdisrepute: number;
  prank: number;
  sexualexploitation: number;
  disruptpublicservice: number;
  salepurchaseillegaldrugs: number;
  developingownbusiness: number;
  spreadingpiracy: number;
  psychoorpervert: number;
  stealinformation: number;
  abetmenttosuicide: number;
  others: number;
  total: number;
}

export const cityData: CityData[] = [
  {
    city: "Bagalkot",
    personalrevenge: 4,
    anger: 2,
    fraud: 15,
    extortion: 3,
    causingdisrepute: 1,
    prank: 2,
    sexualexploitation: 5,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 3,
    abetmenttosuicide: 1,
    others: 4,
    total: 46
  },
  {
    city: "Ballari",
    personalrevenge: 3,
    anger: 1,
    fraud: 12,
    extortion: 2,
    causingdisrepute: 2,
    prank: 1,
    sexualexploitation: 4,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 2,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 3,
    total: 38
  },
  {
    city: "Belagavi",
    personalrevenge: 5,
    anger: 2,
    fraud: 18,
    extortion: 4,
    causingdisrepute: 2,
    prank: 3,
    sexualexploitation: 6,
    disruptpublicservice: 2,
    salepurchaseillegaldrugs: 3,
    developingownbusiness: 2,
    spreadingpiracy: 2,
    psychoorpervert: 2,
    stealinformation: 4,
    abetmenttosuicide: 2,
    others: 5,
    total: 62
  },
  {
    city: "Bengaluru Rural",
    personalrevenge: 2,
    anger: 1,
    fraud: 10,
    extortion: 2,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 1,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 30
  },
  {
    city: "Bengaluru Urban",
    personalrevenge: 6,
    anger: 3,
    fraud: 25,
    extortion: 5,
    causingdisrepute: 3,
    prank: 4,
    sexualexploitation: 7,
    disruptpublicservice: 3,
    salepurchaseillegaldrugs: 4,
    developingownbusiness: 3,
    spreadingpiracy: 3,
    psychoorpervert: 3,
    stealinformation: 5,
    abetmenttosuicide: 2,
    others: 6,
    total: 84
  },
  {
    city: "Bidar",
    personalrevenge: 3,
    anger: 1,
    fraud: 14,
    extortion: 2,
    causingdisrepute: 1,
    prank: 2,
    sexualexploitation: 4,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 3,
    abetmenttosuicide: 1,
    others: 3,
    total: 40
  },
  {
    city: "Chamarajanagar",
    personalrevenge: 2,
    anger: 1,
    fraud: 9,
    extortion: 1,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 1,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 28
  },
  {
    city: "Chikkaballapur",
    personalrevenge: 2,
    anger: 1,
    fraud: 11,
    extortion: 2,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 1,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 31
  },
  {
    city: "Chikkamagaluru",
    personalrevenge: 2,
    anger: 1,
    fraud: 10,
    extortion: 2,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 1,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 30
  },
  {
    city: "Dakshina Kannada",
    personalrevenge: 3,
    anger: 2,
    fraud: 14,
    extortion: 3,
    causingdisrepute: 2,
    prank: 2,
    sexualexploitation: 5,
    disruptpublicservice: 2,
    salepurchaseillegaldrugs: 3,
    developingownbusiness: 1,
    spreadingpiracy: 2,
    psychoorpervert: 1,
    stealinformation: 3,
    abetmenttosuicide: 1,
    others: 3,
    total: 47
  },
  {
    city: "Davanagere",
    personalrevenge: 4,
    anger: 2,
    fraud: 13,
    extortion: 3,
    causingdisrepute: 1,
    prank: 2,
    sexualexploitation: 4,
    disruptpublicservice: 2,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 3,
    total: 42
  },
  {
    city: "Dharwad",
    personalrevenge: 3,
    anger: 1,
    fraud: 12,
    extortion: 2,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 34
  },
  {
    city: "Gadag",
    personalrevenge: 2,
    anger: 1,
    fraud: 10,
    extortion: 2,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 1,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 30
  },
  {
    city: "Hassan",
    personalrevenge: 3,
    anger: 2,
    fraud: 11,
    extortion: 2,
    causingdisrepute: 1,
    prank: 2,
    sexualexploitation: 4,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 3,
    total: 37
  },
  {
    city: "Haveri",
    personalrevenge: 2,
    anger: 1,
    fraud: 9,
    extortion: 1,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 1,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 28
  },
  {
    city: "Kalaburagi",
    personalrevenge: 4,
    anger: 2,
    fraud: 15,
    extortion: 3,
    causingdisrepute: 2,
    prank: 2,
    sexualexploitation: 5,
    disruptpublicservice: 2,
    salepurchaseillegaldrugs: 3,
    developingownbusiness: 1,
    spreadingpiracy: 2,
    psychoorpervert: 2,
    stealinformation: 3,
    abetmenttosuicide: 1,
    others: 4,
    total: 51
  },
  {
    city: "Kodagu",
    personalrevenge: 2,
    anger: 1,
    fraud: 8,
    extortion: 1,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 2,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 1,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 1,
    abetmenttosuicide: 1,
    others: 2,
    total: 25
  },
  {
    city: "Kolar",
    personalrevenge: 3,
    anger: 1,
    fraud: 12,
    extortion: 2,
    causingdisrepute: 1,
    prank: 2,
    sexualexploitation: 4,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 3,
    total: 35
  },
  {
    city: "Koppal",
    personalrevenge: 2,
    anger: 1,
    fraud: 10,
    extortion: 2,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 1,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 30
  },
  {
    city: "Mandya",
    personalrevenge: 3,
    anger: 2,
    fraud: 11,
    extortion: 2,
    causingdisrepute: 1,
    prank: 2,
    sexualexploitation: 4,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 3,
    total: 35
  },
  {
    city: "Mysuru",
    personalrevenge: 3,
    anger: 2,
    fraud: 14,
    extortion: 3,
    causingdisrepute: 2,
    prank: 2,
    sexualexploitation: 5,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 2,
    psychoorpervert: 1,
    stealinformation: 3,
    abetmenttosuicide: 1,
    others: 3,
    total: 45
  },
  {
    city: "Raichur",
    personalrevenge: 4,
    anger: 1,
    fraud: 13,
    extortion: 2,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 4,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 37
  },
  {
    city: "Ramanagara",
    personalrevenge: 2,
    anger: 1,
    fraud: 10,
    extortion: 1,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 1,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 28
  },
  {
    city: "Shivamogga",
    personalrevenge: 3,
    anger: 2,
    fraud: 12,
    extortion: 2,
    causingdisrepute: 1,
    prank: 2,
    sexualexploitation: 4,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 3,
    abetmenttosuicide: 1,
    others: 3,
    total: 38
  },
  {
    city: "Tumakuru",
    personalrevenge: 3,
    anger: 1,
    fraud: 11,
    extortion: 2,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 33
  },
  {
    city: "Udupi",
    personalrevenge: 2,
    anger: 1,
    fraud: 10,
    extortion: 1,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 1,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 29
  },
  {
    city: "Uttara Kannada",
    personalrevenge: 3,
    anger: 1,
    fraud: 12,
    extortion: 2,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 4,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 3,
    total: 36
  },
  {
    city: "Vijayapura",
    personalrevenge: 4,
    anger: 2,
    fraud: 15,
    extortion: 3,
    causingdisrepute: 2,
    prank: 2,
    sexualexploitation: 5,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 2,
    psychoorpervert: 1,
    stealinformation: 3,
    abetmenttosuicide: 1,
    others: 3,
    total: 47
  },
  {
    city: "Vijayanagara",
    personalrevenge: 3,
    anger: 1,
    fraud: 11,
    extortion: 2,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 2,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 33
  },
  {
    city: "Yadgir",
    personalrevenge: 2,
    anger: 1,
    fraud: 9,
    extortion: 1,
    causingdisrepute: 1,
    prank: 1,
    sexualexploitation: 3,
    disruptpublicservice: 1,
    salepurchaseillegaldrugs: 1,
    developingownbusiness: 1,
    spreadingpiracy: 1,
    psychoorpervert: 1,
    stealinformation: 2,
    abetmenttosuicide: 1,
    others: 2,
    total: 27
  }
  
];

// Get top cities by total crime
export const getTopCities = (limit: number = 5): CityData[] => {
  return [...cityData].sort((a, b) => b.total - a.total).slice(0, limit);
};

// Get cities list
export const getCitiesList = (): string[] => {
  return cityData.map(city => city.city).sort();
};

// Get city data by name
export const getCityData = (cityName: string): CityData | undefined => {
  return cityData.find(city => city.city.toLowerCase() === cityName.toLowerCase());
};

// Get crime categories
export const getCrimeCategories = (): string[] => {
  return [
    "Personal Revenge",
    "Anger",
    "Fraud",
    "Extortion",
    "Causing Disrepute",
    "Prank",
    "Sexual Exploitation",
    "Disrupt Public Service",
    "Sale/Purchase of Illegal Drugs",
    "Developing Own Business",
    "Spreading Piracy",
    "Psycho or Pervert",
    "Steal Information",
    "Abetment to Suicide",
    "Others"
  ];
};

// Calculate crime percentages for a city
export const getCrimePercentages = (cityName: string): { category: string; percentage: number }[] => {
  const city = getCityData(cityName);
  if (!city) return [];

  const categories = getCrimeCategories();
  const result: { category: string; percentage: number }[] = [];

  let totalNonZeroCrimes = 0;
  for (const category of categories) {
    const key = category.toLowerCase().replace(/ /g, '').replace('/', '') as keyof CityData;
    if (typeof city[key] === 'number') {
      totalNonZeroCrimes += city[key] as number;
    }
  }

  for (const category of categories) {
    const key = category.toLowerCase().replace(/ /g, '').replace('/', '') as keyof CityData;
    if (typeof city[key] === 'number' && city[key] as number > 0) {
      const percentage = ((city[key] as number) / totalNonZeroCrimes) * 100;
      result.push({ category, percentage });
    }
  }

  return result.sort((a, b) => b.percentage - a.percentage);
};

// Mock a prediction result
export const getPredictedCrimeRate = (cityName: string): number => {
  const city = getCityData(cityName);
  if (!city) return 0;
  
  // In a real app, this would be a call to an ML model
  // Here we're just returning the actual total with a small random adjustment
  const randomFactor = 0.9 + Math.random() * 0.2; // between 0.9 and 1.1
  return Math.round(city.total * randomFactor);
};
