
export interface CityData {
  city: string;
  personalRevenge: number;
  anger: number;
  fraud: number;
  extortion: number;
  causingDisrepute: number;
  prank: number;
  sexualExploitation: number;
  disruptPublicService: number;
  salePurchaseIllegalDrugs: number;
  developingOwnBusiness: number;
  spreadingPiracy: number;
  psychoOrPervert: number;
  stealInformation: number;
  abetmentToSuicide: number;
  others: number;
  total: number;
}

// Sample data from the CSV
export const cityData: CityData[] = [
  {
    city: "Agra",
    personalRevenge: 5.0,
    anger: 0.0,
    fraud: 19.0,
    extortion: 0.0,
    causingDisrepute: 0.0,
    prank: 0.0,
    sexualExploitation: 0.0,
    disruptPublicService: 0.0,
    salePurchaseIllegalDrugs: 0.0,
    developingOwnBusiness: 0.0,
    spreadingPiracy: 0.0,
    psychoOrPervert: 0.0,
    stealInformation: 0.0,
    abetmentToSuicide: 0.0,
    others: 46.0,
    total: 70.0
  },
  {
    city: "Allahabad",
    personalRevenge: 0.0,
    anger: 0.0,
    fraud: 222.0,
    extortion: 11.0,
    causingDisrepute: 8.0,
    prank: 0.0,
    sexualExploitation: 0.0,
    disruptPublicService: 0.0,
    salePurchaseIllegalDrugs: 0.0,
    developingOwnBusiness: 0.0,
    spreadingPiracy: 0.0,
    psychoOrPervert: 0.0,
    stealInformation: 0.0,
    abetmentToSuicide: 0.0,
    others: 0.0,
    total: 241.0
  },
  {
    city: "Amritsar",
    personalRevenge: 2.0,
    anger: 0.0,
    fraud: 5.0,
    extortion: 0.0,
    causingDisrepute: 0.0,
    prank: 0.0,
    sexualExploitation: 2.0,
    disruptPublicService: 0.0,
    salePurchaseIllegalDrugs: 0.0,
    developingOwnBusiness: 0.0,
    spreadingPiracy: 0.0,
    psychoOrPervert: 0.0,
    stealInformation: 0.0,
    abetmentToSuicide: 0.0,
    others: 0.0,
    total: 9.0
  },
  {
    city: "Asansol",
    personalRevenge: 6.0,
    anger: 1.0,
    fraud: 3.0,
    extortion: 0.0,
    causingDisrepute: 0.0,
    prank: 0.0,
    sexualExploitation: 0.0,
    disruptPublicService: 0.0,
    salePurchaseIllegalDrugs: 0.0,
    developingOwnBusiness: 0.0,
    spreadingPiracy: 0.0,
    psychoOrPervert: 0.0,
    stealInformation: 0.0,
    abetmentToSuicide: 0.0,
    others: 11.0,
    total: 21.0
  },
  {
    city: "Aurangabad",
    personalRevenge: 5.0,
    anger: 2.0,
    fraud: 51.0,
    extortion: 0.0,
    causingDisrepute: 0.0,
    prank: 0.0,
    sexualExploitation: 21.0,
    disruptPublicService: 0.0,
    salePurchaseIllegalDrugs: 0.0,
    developingOwnBusiness: 0.0,
    spreadingPiracy: 0.0,
    psychoOrPervert: 0.0,
    stealInformation: 0.0,
    abetmentToSuicide: 0.0,
    others: 0.0,
    total: 82.0
  },
  {
    city: "Bhopal",
    personalRevenge: 0.0,
    anger: 0.0,
    fraud: 4.0,
    extortion: 7.0,
    causingDisrepute: 2.0,
    prank: 0.0,
    sexualExploitation: 1.0,
    disruptPublicService: 1.0,
    salePurchaseIllegalDrugs: 0.0,
    developingOwnBusiness: 0.0,
    spreadingPiracy: 0.0,
    psychoOrPervert: 0.0,
    stealInformation: 0.0,
    abetmentToSuicide: 0.0,
    others: 0.0,
    total: 16.0
  },
  {
    city: "Chandigarh City",
    personalRevenge: 0.0,
    anger: 0.0,
    fraud: 19.0,
    extortion: 3.0,
    causingDisrepute: 0.0,
    prank: 7.0,
    sexualExploitation: 0.0,
    disruptPublicService: 0.0,
    salePurchaseIllegalDrugs: 0.0,
    developingOwnBusiness: 0.0,
    spreadingPiracy: 0.0,
    psychoOrPervert: 0.0,
    stealInformation: 0.0,
    abetmentToSuicide: 0.0,
    others: 1.0,
    total: 30.0
  },
  {
    city: "Dhanbad",
    personalRevenge: 2.0,
    anger: 0.0,
    fraud: 29.0,
    extortion: 0.0,
    causingDisrepute: 0.0,
    prank: 0.0,
    sexualExploitation: 0.0,
    disruptPublicService: 0.0,
    salePurchaseIllegalDrugs: 0.0,
    developingOwnBusiness: 0.0,
    spreadingPiracy: 0.0,
    psychoOrPervert: 0.0,
    stealInformation: 0.0,
    abetmentToSuicide: 0.0,
    others: 0.0,
    total: 31.0
  },
  {
    city: "Varanasi",
    personalRevenge: 12.0,
    anger: 14.0,
    fraud: 111.0,
    extortion: 5.0,
    causingDisrepute: 17.0,
    prank: 31.0,
    sexualExploitation: 31.0,
    disruptPublicService: 5.0,
    salePurchaseIllegalDrugs: 0.0,
    developingOwnBusiness: 0.0,
    spreadingPiracy: 8.0,
    psychoOrPervert: 0.0,
    stealInformation: 0.0,
    abetmentToSuicide: 0.0,
    others: 49.0,
    total: 287.0
  },
  {
    city: "Vishakhapatnam",
    personalRevenge: 13.0,
    anger: 15.0,
    fraud: 358.0,
    extortion: 1.0,
    causingDisrepute: 0.0,
    prank: 0.0,
    sexualExploitation: 0.0,
    disruptPublicService: 0.0,
    salePurchaseIllegalDrugs: 0.0,
    developingOwnBusiness: 0.0,
    spreadingPiracy: 0.0,
    psychoOrPervert: 0.0,
    stealInformation: 0.0,
    abetmentToSuicide: 0.0,
    others: 40.0,
    total: 427.0
  }
];

// Get top cities by total crime
export const getTopCities = (limit: number = 5): CityData[] => {
  return [...cityData].sort((a, b) => b.total - a.total).slice(0, limit);
};

// Get cities list
export const getCitiesList = (): string[] => {
  return cityData.map(city => city.city).sort();
};

// Get city data by name
export const getCityData = (cityName: string): CityData | undefined => {
  return cityData.find(city => city.city.toLowerCase() === cityName.toLowerCase());
};

// Get crime categories
export const getCrimeCategories = (): string[] => {
  return [
    "Personal Revenge",
    "Anger",
    "Fraud",
    "Extortion",
    "Causing Disrepute",
    "Prank",
    "Sexual Exploitation",
    "Disrupt Public Service",
    "Sale/Purchase of Illegal Drugs",
    "Developing Own Business",
    "Spreading Piracy",
    "Psycho or Pervert",
    "Steal Information",
    "Abetment to Suicide",
    "Others"
  ];
};

// Calculate crime percentages for a city
export const getCrimePercentages = (cityName: string): { category: string; percentage: number }[] => {
  const city = getCityData(cityName);
  if (!city) return [];

  const categories = getCrimeCategories();
  const result: { category: string; percentage: number }[] = [];

  let totalNonZeroCrimes = 0;
  for (const category of categories) {
    const key = category.toLowerCase().replace(/ /g, '').replace('/', '') as keyof CityData;
    if (typeof city[key] === 'number') {
      totalNonZeroCrimes += city[key] as number;
    }
  }

  for (const category of categories) {
    const key = category.toLowerCase().replace(/ /g, '').replace('/', '') as keyof CityData;
    if (typeof city[key] === 'number' && city[key] as number > 0) {
      const percentage = ((city[key] as number) / totalNonZeroCrimes) * 100;
      result.push({ category, percentage });
    }
  }

  return result.sort((a, b) => b.percentage - a.percentage);
};

// Mock a prediction result
export const getPredictedCrimeRate = (cityName: string): number => {
  const city = getCityData(cityName);
  if (!city) return 0;
  
  // In a real app, this would be a call to an ML model
  // Here we're just returning the actual total with a small random adjustment
  const randomFactor = 0.9 + Math.random() * 0.2; // between 0.9 and 1.1
  return Math.round(city.total * randomFactor);
};
